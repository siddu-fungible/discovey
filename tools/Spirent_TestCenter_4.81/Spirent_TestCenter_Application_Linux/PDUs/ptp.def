<?xml version="1.0" encoding="UTF-8"?>
<PDU_LIBRARY xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:noNamespaceSchemaLocation="pdu_schema.xsd"
  name="ptp"
  showName="IEEE 1588 PTP"
  version="1.00"
  description="This is a sample PDU library for IEEE 1588 PTP as defined in XML Stream Editor.">

<TYPE_DEFS>
    <!-- =================================================================== -->
    <!-- Common Elements (HEADER) ========================================== -->
    <TYPE_DEF name="MessageTypes" type="INTEGER" bitLength="4" unitType="ELEMENT">
        <VALUE_ENUMERATION>
            <VAL_ENUM uiShowName="Sync"                 value="0" />
            <VAL_ENUM uiShowName="DelayReq"             value="1" />
            <VAL_ENUM uiShowName="PdelayReq"            value="2" />
            <VAL_ENUM uiShowName="PdelayResp"           value="3" />
            <VAL_ENUM uiShowName="Reserved (4)"         value="4" />
            <VAL_ENUM uiShowName="Reserved (5)"         value="5" />
            <VAL_ENUM uiShowName="Reserved (6)"         value="6" />
            <VAL_ENUM uiShowName="Reserved (7)"         value="7" />
            <VAL_ENUM uiShowName="FollowUp"             value="8" />
            <VAL_ENUM uiShowName="DelayResp"            value="9" />
            <VAL_ENUM uiShowName="PdelayRespFollowUp"   value="10" />
            <VAL_ENUM uiShowName="Announce"             value="11" />
            <VAL_ENUM uiShowName="Signaling"            value="12" />
            <VAL_ENUM uiShowName="Management"           value="13" />
            <VAL_ENUM uiShowName="Reserved (14)"        value="14" />
            <VAL_ENUM uiShowName="Reserved (15)"        value="15" />
        </VALUE_ENUMERATION>
    </TYPE_DEF>

    <TYPE_DEF name="FlagsSecurity" type="INTEGER" bitLength="1" unitType="ELEMENT">
        <VALUE_ENUMERATION>
            <VAL_ENUM uiShowName="False" value="0" />
            <VAL_ENUM uiShowName="True" value="1" />
        </VALUE_ENUMERATION>
    </TYPE_DEF>

    <TYPE_DEF name="FlagsPtpProfileSpec2" type="INTEGER" bitLength="1" unitType="ELEMENT">
        <VALUE_ENUMERATION>
            <VAL_ENUM uiShowName="False" value="0" />
            <VAL_ENUM uiShowName="True" value="1" />
        </VALUE_ENUMERATION>
    </TYPE_DEF>

    <TYPE_DEF name="FlagsPtpProfileSpec1" type="INTEGER" bitLength="1" unitType="ELEMENT">
        <VALUE_ENUMERATION>
            <VAL_ENUM uiShowName="False" value="0" />
            <VAL_ENUM uiShowName="True" value="1" />
        </VALUE_ENUMERATION>
    </TYPE_DEF>

    <TYPE_DEF name="FlagsUnicast" type="INTEGER" bitLength="1" unitType="ELEMENT">
        <VALUE_ENUMERATION>
            <VAL_ENUM uiShowName="False" value="0" />
            <VAL_ENUM uiShowName="True" value="1" />
        </VALUE_ENUMERATION>
    </TYPE_DEF>

    <TYPE_DEF name="FlagsTwoStep" type="INTEGER" bitLength="1" unitType="ELEMENT">
        <VALUE_ENUMERATION>
            <VAL_ENUM uiShowName="False" value="0" />
            <VAL_ENUM uiShowName="True" value="1" />
        </VALUE_ENUMERATION>
    </TYPE_DEF>

    <TYPE_DEF name="FlagsAltMaster" type="INTEGER" bitLength="1" unitType="ELEMENT">
        <VALUE_ENUMERATION>
            <VAL_ENUM uiShowName="False" value="0" />
            <VAL_ENUM uiShowName="True"  value="1" />
        </VALUE_ENUMERATION>
    </TYPE_DEF>

    <TYPE_DEF name="FlagsFreqTraceable" type="INTEGER" bitLength="1" unitType="ELEMENT">
        <VALUE_ENUMERATION>
            <VAL_ENUM uiShowName="False" value="0" />
            <VAL_ENUM uiShowName="True" value="1" />
        </VALUE_ENUMERATION>
    </TYPE_DEF>

    <TYPE_DEF name="FlagsTimeTraceable" type="INTEGER" bitLength="1" unitType="ELEMENT">
        <VALUE_ENUMERATION>
            <VAL_ENUM uiShowName="False" value="0" />
            <VAL_ENUM uiShowName="True" value="1" />
        </VALUE_ENUMERATION>
    </TYPE_DEF>

   <TYPE_DEF name="FlagsPtpTimescale" type="INTEGER" bitLength="1" unitType="ELEMENT">
        <VALUE_ENUMERATION>
            <VAL_ENUM uiShowName="False" value="0" />
            <VAL_ENUM uiShowName="True" value="1" />
        </VALUE_ENUMERATION>
    </TYPE_DEF>

    <TYPE_DEF name="FlagsUtcOffsetValid" type="INTEGER" bitLength="1" unitType="ELEMENT">
        <VALUE_ENUMERATION>
            <VAL_ENUM uiShowName="False" value="0" />
            <VAL_ENUM uiShowName="True" value="1" />
        </VALUE_ENUMERATION>
    </TYPE_DEF>

    <TYPE_DEF name="FlagsLeap59" type="INTEGER" bitLength="1" unitType="ELEMENT">
        <VALUE_ENUMERATION>
            <VAL_ENUM uiShowName="False" value="0" />
            <VAL_ENUM uiShowName="True" value="1" />
        </VALUE_ENUMERATION>
    </TYPE_DEF>

    <TYPE_DEF name="FlagsLeap61" type="INTEGER" bitLength="1" unitType="ELEMENT">
        <VALUE_ENUMERATION>
            <VAL_ENUM uiShowName="False" value="0" />
            <VAL_ENUM uiShowName="True" value="1" />
        </VALUE_ENUMERATION>
    </TYPE_DEF>

    <TYPE_DEF name="FlagsField" type="SEQUENCE" unitType="ELEMENT" uiShowName="Flag Field">
        <FIELD name="PtpSecurity" type="FlagsSecurity" defaultValue="0" uiShowName="PTP Security" />
        <FIELD name="PtpProfileSpec2" type="FlagsPtpProfileSpec2" defaultValue="0" uiShowName="PTP Profile Specific 2" />
        <FIELD name="PtpProfileSpec1" type="FlagsPtpProfileSpec1" defaultValue="0" uiShowName="PTP Profile Specific 1" />
        <FIELD name="Reserved" type="INTEGER" bitLength="2" defaultValue="0" uiNoShow="Interface" uiShowCommon="false" uiShowName="Reserved" />
        <FIELD name="UnicastFlag" type="FlagsUnicast" defaultValue="0" uiShowName="Unicast Flag" />
        <FIELD name="TwoStepFlag" type="FlagsTwoStep" defaultValue="0" uiShowName="Two Step Flag" />
        <FIELD name="AltMasterFlag" type="FlagsAltMaster" defaultValue="0" uiShowName="Alt Master Flag" />
        <FIELD name="Reserved" type="INTEGER" bitLength="2" defaultValue="0" uiNoShow="Interface" uiShowCommon="false" uiShowName="Reserved" />
        <FIELD name="FreqTraceable" type="FlagsFreqTraceable" defaultValue="0" uiShowName="Freq Traceable" />
        <FIELD name="TimeTraceable" type="FlagsTimeTraceable" defaultValue="0" uiShowName="Time Traceable" />
        <FIELD name="PtpTimescale" type="FlagsPtpTimescale" defaultValue="0" uiShowName="PTP Timescale" />
        <FIELD name="UtcOffsetValid" type="FlagsUtcOffsetValid" defaultValue="0" uiShowName="UTC Offset Valid" />
        <FIELD name="Leap59" type="FlagsLeap59" defaultValue="0" uiShowName="Leap 59" />
        <FIELD name="Leap61" type="FlagsLeap61" defaultValue="0" uiShowName="Leap 61" />
    </TYPE_DEF>

    <TYPE_DEF name="CorrectionType" type="SEQUENCE" unitType="ELEMENT" uiShowName="Correction Field">
        <!-- Note: Due to a framework limitation, this 48-bit field has been
        split to two portions -->
        <FIELD name="NsHi" type="INTEGER" bitLength="16" defaultValue="0" uiShowName="Ns (upper 16 bits)" />
        <FIELD name="Ns" type="INTEGER" bitLength="32" defaultValue="0" uiShowName="Ns (lower 32 bits)" />
        <FIELD name="SubNs" type="INTEGER" bitLength="16" defaultValue="0" uiShowName="SubNs" />
    </TYPE_DEF>

    <TYPE_DEF name="PortId" type="SEQUENCE" unitType="ELEMENT" uiShowName="Port Id">
        <FIELD name="ClockId" type="OCTETSTRING" byteLength="8" defaultValue="0000000000000000" uiShowName="Clock Id" />
        <FIELD name="SrcPortId" type="INTEGER" bitLength="16" defaultValue="0" uiShowName="Source Port Id" />
    </TYPE_DEF>

    <TYPE_DEF name="ControlType" type="OCTETSTRING" byteLength="1" unitType="ELEMENT">
        <VALUE_ENUMERATION>
            <VAL_ENUM uiShowName="Sync"                 value="00" />
            <VAL_ENUM uiShowName="DelayReq"             value="01" />
            <VAL_ENUM uiShowName="FollowUp"             value="02" />
            <VAL_ENUM uiShowName="DelayResp"            value="03" />
            <VAL_ENUM uiShowName="Management"           value="04" />
            <VAL_ENUM uiShowName="Others"               value="05" />
            <VAL_ENUM uiShowName="Reserved"             value="06" />
        </VALUE_ENUMERATION>
    </TYPE_DEF>

    <TYPE_DEF name="PtpHdr" type="SEQUENCE" unitType="ELEMENT" uiShowName="PTP Message Header">
        <FIELD name="TransportSpecific" type="BITSTRING" bitLength="4" defaultValue="0000" uiNoShow="Interface" uiShowCommon="false" uiShowName="Transport Specific" />
        <FIELD name="MessageType" type="MessageTypes" defaultValue="0" bitLength="4" uiShowName="Message Type" />
        <FIELD name="Reserved" type="INTEGER" bitLength="4" defaultValue="0" uiNoShow="Interface" uiShowCommon="false" uiShowName="Reserved" />
        <FIELD name="VersionPtp" type="INTEGER" bitLength="4" defaultValue="2" uiShowName="Version PTP" />
        <FIELD name="MessageLength" type="INTEGER" bitLength="16" procfnTarget="TOTALLENGTH" defaultValue="0" uiShowName="Message Length" uiControlState="CALCULATED" />
        <FIELD name="DomainNumber" type="INTEGER" bitLength="8" defaultValue="0" uiShowName="Domain Number" />
        <FIELD name="Reserved" type="INTEGER" bitLength="8" defaultValue="0" uiNoShow="Interface" uiShowCommon="false" uiShowName="Reserved" />
        <FIELD name="FlagField" type="FlagsField" uiShowName="Flag Field" />
        <FIELD name="CorrectionField" type="CorrectionType" uiShowName="Correction Field" />
        <FIELD name="Reserved" type="INTEGER" bitLength="32" defaultValue="0" uiNoShow="Interface" uiShowCommon="false" uiShowName="Reserved" />
        <FIELD name="SourcePortId" type="PortId" uiShowName="Source Port Identity" />
        <FIELD name="SeqId" type="INTEGER" bitLength="16" defaultValue="0" uiShowName="Sequence Id" />
        <FIELD name="ControlField" type="ControlType" uiShowName="Control Field" />
        <FIELD name="LogMsgInt" type="INTEGER" bitLength="8" defaultValue="127" uiShowName="Log Message Interval" uiControlState="CALCULATED" />
    </TYPE_DEF>

    <!-- =================================================================== -->
    <!-- Sync, Delay Request & Follow Up =================================== -->
    <TYPE_DEF name="TimestampType" type="SEQUENCE" unitType="ELEMENT" uiShowName="Correction Field">
        <!-- Framework does not support 48-bit fields, breaking it here -->
        <FIELD name="SecHi" type="INTEGER" bitLength="16" defaultValue="0" uiShowName="Seconds (upper 16 bits)" />
        <FIELD name="Sec" type="INTEGER" bitLength="32" defaultValue="0" uiShowName="Seconds (lower 32 bits)" />
        <FIELD name="Ns" type="INTEGER" bitLength="32" defaultValue="0" uiShowName="Nanoseconds" />
    </TYPE_DEF>

    <TYPE_DEF name="Timestamp" type="SEQUENCE" unitType="HEADER" portType="Ethernet" uiShowName="PTP Timestamp">
        <FIELD name="ptpHeader" type="PtpHdr" uiShowName="PTP Message Header" />
        <FIELD name="timestampType" type="TimestampType" uiShowName="Timestamp" />
    </TYPE_DEF>

    <TYPE_DEF name="Sync" type="SEQUENCE" unitType="HEADER" portType="Ethernet" uiShowName="PTP Sync">
        <FIELD name="ptpHeader" type="PtpHdr" uiShowName="PTP Message Header" />
        <FIELD name="timestampType" type="TimestampType" uiShowName="Origin Timestamp" />
    </TYPE_DEF>

    <TYPE_DEF name="DelayReq" type="SEQUENCE" unitType="HEADER" portType="Ethernet" uiShowName="PTP Delay Request">
        <FIELD name="ptpHeader" type="PtpHdr" uiShowName="PTP Message Header" />
        <FIELD name="timestampType" type="TimestampType" uiShowName="Precise Origin Timestamp" />
    </TYPE_DEF>

    <TYPE_DEF name="FollowUp" type="SEQUENCE" unitType="HEADER" portType="Ethernet" uiShowName="PTP Follow Up">
        <FIELD name="ptpHeader" type="PtpHdr" uiShowName="PTP Message Header" />
        <FIELD name="timestampType" type="TimestampType" uiShowName="Precise Origin Timestamp" />
    </TYPE_DEF>

</TYPE_DEFS>
</PDU_LIBRARY>
