<?xml version="1.0" ?>
<stc:meta xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xmlns:stc="urn:www.spirentcom.com:XMLSchema.xsd"
          plugin="plcommands" package="spirent.methodology.routing"
          version="0.0.0-0">

<stc:class name="BgpImportRoutesCommand"
           displayName="Expand Import Route Command"
           bllDirectInterface="true"
           isInternal="false">
    <stc:attribute internalIsEnum="false" internalType="bool" name="none" type="core.Sequenceable" value="true"/>
    <stc:attribute internalIsEnum="false" internalType="string" name="none" type="framework.CommandDescription" value="Uses BgpImportRouteTableCommand to generate and import routes from a specified route table."/>
    <stc:attribute internalIsEnum="false" internalType="string" name="none" type="framework.CommandCategory" value="Test Methodology//Topology Template"/>
    <stc:attribute type="core.RequireApplyToIL" value="false" internalType="bool" />
    <stc:attribute type="core.RequirePostApplyToIL" value="false" internalType="bool" />

    <stc:property category="input" name="RouterTagList" displayName="Router Tag List" type="string" default="" minOccurs="0" maxOccurs="unbounded">
      <stc:attribute internalIsEnum="false" internalType="string" name="none" type="framework.PropertyDescription" value="List of tag names of BgpRouterConfig objects importing the BgpRouteConfig objects under." />
    </stc:property>

    <stc:property category="input" name="BgpImportParamsTagName" displayName="BgpImportRouteTableParams tag name" type="string" default="ttImportRouteParams">
      <stc:attribute internalIsEnum="false" internalType="string" name="none" type="framework.PropertyDescription" value="Tag name of the BgpImportRouteTableParams object that the BgpImportRouteTableCommand will use to generate routes." />
    </stc:property>

    <stc:property category="input" name="CreatedRoutesTagName" displayName="New routes will be tagged with this" type="string" default="ttImportRouteParams">
      <stc:attribute internalIsEnum="false" internalType="string" name="none" type="framework.PropertyDescription" value="Tag name attached to the new routes made by the BgpImportRouteTableCommand." />
    </stc:property>

    <stc:property category="input" name="ExpectedCount" displayName="Expected Count" type="u64" default="0">
        <stc:attribute internalType="string" type="framework.PropertyDescription" value="Number of routes expected to be imported per router instance. If 0, the imported route count will not be verified." />
    </stc:property>

    <stc:property category="input" name="ExpectedCountTolerancePercent" displayName="Expected Count Tolerance Percent" type="double" default="0">
        <stc:attribute internalType="string" type="framework.PropertyDescription" value="Tolerance (in percent) for the expected number of routes.  The actual imported route count must be within + or - tolerance of the value specified by ExpectedCount.  If 0, no tolerance will be used and the actual imported route count must match ExpectedCount." />
    </stc:property>

<!-- CATEGORY: Routing -->

</stc:class>

<stc:class name="RoutePrefixDistributionCommand"
           displayName="Route Prefix Distribution Command"
           bllDirectInterface="true"
           isInternal="false">
    <stc:attribute internalIsEnum="false" internalType="bool" name="none" type="core.Sequenceable" value="true"/>
    <stc:attribute internalIsEnum="false" internalType="string" name="none" type="framework.CommandDescription" value="Creates routes with user-specified prefixes."/>
    <stc:attribute internalIsEnum="false" internalType="string" name="none" type="framework.CommandCategory" value="Test Methodology//Topology Template"/>
    <stc:attribute type="core.RequireApplyToIL" value="false" internalType="bool" />
    <stc:attribute type="core.RequirePostApplyToIL" value="false" internalType="bool" />

    <stc:property category="input" name="RouterTagList" displayName="Router Tag List" type="string" default="" minOccurs="0" maxOccurs="unbounded">
      <stc:attribute internalIsEnum="false" internalType="string" name="none" type="framework.PropertyDescription" value="List of tag names of EmulatedDevice or RouterConfig objects to attach routes to." />
    </stc:property>

    <stc:property category="input" name="SrcObjectTagName" displayName="Source Object Tag Name tag name" type="string" default="ttProtocolRouteGenParams">
      <stc:attribute internalIsEnum="false" internalType="string" name="none" type="framework.PropertyDescription" value="Tag name of the ProtocolRouteGenParams object that the RouteGenApplyCommand will use to generate routes." />
    </stc:property>

    <stc:property category="input" name="CreatedRoutesTagName" displayName="Created Routes Tag Name" type="string" default="ttRoutePrefixParams">
      <stc:attribute internalIsEnum="false" internalType="string" name="none" type="framework.PropertyDescription" value="Tag name attached to the new routes made by the RouteGenApplyCommand." />
    </stc:property>

    <stc:property category="input" name="CreatedRoutesTagPrefixName" displayName="Created Routes Tag Prefix Name" type="string" default="">
      <stc:attribute internalIsEnum="false" internalType="string" name="none" type="framework.PropertyDescription" value="Prefix name added to CreatedRoutesTagName" />
    </stc:property>

<!-- CATEGORY: Routing -->

</stc:class>

<stc:class name="CreateRouteMixCommand"
           displayName="Create Route Mix Command"
           baseClass="spirent.methodology.CreateTemplateMixCommand"
           bllDirectInterface="true">
    <stc:attribute internalIsEnum="false" internalType="bool" name="none" type="core.Sequenceable" value="true"/>
    <stc:attribute internalIsEnum="false" internalType="string" name="none" type="framework.CommandDescription" value="Command for creating mixtures of route counts among route objects on router config objects."/>
    <stc:attribute internalIsEnum="false" internalType="string" name="none" type="framework.CommandCategory" value="Test Methodology//Routing"/>

    <!-- These all should be from the base class -->
    
    <stc:property category="input" name="MixInfo" displayName="Mix Info" type="string" default="">
        <stc:attribute internalIsEnum="false" internalType="string" name="none" type="framework.PropertyDescription"
        value="JSON string representation of the mix (including table data)"/>
        <stc:attribute type="framework.StringPropertyFormat" internalIsEnum="true" internalType="u8" value="JSON" />
    </stc:property>
    <stc:property category="input" name="MixTagName" displayName="Mix Container Tag Name" type="string" default="">
        <stc:attribute internalIsEnum="false" internalType="string" name="none" type="framework.PropertyDescription"
         value="Name to use when tagging the output StmTemplateMix.  If empty, StmTemplateMix will not be tagged."/>
    </stc:property>
    <stc:property category="input" name="AutoExpandTemplateMix" displayName="Automatically expand templates in the mix" type="bool" default="true">
      <stc:attribute internalIsEnum="false" internalType="string" name="none" type="framework.PropertyDescription"
       value="True expands the template mix before command completes. False will not expand the template mix." />
    </stc:property>
    <stc:property category="state" name="GroupCommandTagInfo" displayName="Group Command Tag Info" type="string" default="" >
        <stc:attribute internalIsEnum="false" internalType="string" name="none" type="framework.PropertyDescription"
         value="JSON structure containing the names of the tags used to refer to commands in this group."/>
        <stc:attribute type="framework.StringPropertyFormat" internalIsEnum="true" internalType="u8" value="JSON" />
    </stc:property>

    <stc:property category="input" name="TargetObjectList" displayName="Target Object List" type="handle" default="" minOccurs="0" maxOccurs="unbounded">
        <stc:attribute internalIsEnum="false" internalType="string" name="none" type="framework.PropertyDescription"
        value="List of StmProtocolMix, StmTemplateConfig, EmulatedDevice, or RouterConfig objects in which RouteConfig objects will be expanded under."/>
    </stc:property>

    <stc:property category="input" name="TargetObjectTagList" displayName="Target Object Tag List" type="string" default="" minOccurs="0" maxOccurs="unbounded" >
      <stc:attribute internalIsEnum="false" internalType="string" name="none" type="framework.PropertyDescription" value="List of tag names, which tag StmProtocolMix, StmTemplateConfig, EmulatedDevice, or RouterConfig objects in which  RouteConfig objects will be expanded under." />
    </stc:property>

<!-- CATEGORY: Routing -->

<!-- SAMPLE_JSON:
This sample includes routes generated manually from a template (BGP, OSPFv3, ISIS, OSPFv2), imported from a file (BGP) and prefix distribution (BGP). The weight value in the import component is not used. The number of routes generated for import are determined by the import file. Manual routes are generated on the Target Object specified in the command. Imported and prefix distribution routes are generated on the objects specified in the component targetTagList.
{
  "routeCount": 500,
  "table": [
    {
      "baseTemplateFile": "AllRouters.xml",
      "weight": "20%",
      "modifyList": [
        {
          "operationList": [
            {
              "merge": {
                "mergeSourceTag": "ttBgpIpv4RouteConfig",
                "mergeSourceTemplateFile": "AllRoutes.xml",
                "mergeTargetTag": "ttBgpRouterConfig"
              }
            }
          ]
        }
      ]
    },
    {
      "baseTemplateFile": "AllRouters.xml",
      "weight": "20%",
      "modifyList": [
        {
          "operationList": [
            {
              "merge": {
                "mergeSourceTag": "ttBgpIpv6RouteConfig",
                "mergeSourceTemplateFile": "AllRoutes.xml",
                "mergeTargetTag": "ttBgpRouterConfig"
              }
            }
          ]
        }
      ]
    },
    {
      "baseTemplateFile": "AllRouters.xml",
      "weight": "20%",
      "modifyList": [
        {
          "operationList": [
            {
              "merge": {
                "mergeSourceTag": "ttOspfv3InterAreaPrefixLsaBlk",
                "mergeSourceTemplateFile": "AllRoutes.xml",
                "mergeTargetTag": "ttOspfv3RouterConfig"
              }
            }
          ]
        }
      ]
    },
    {
      "baseTemplateFile": "AllRouters.xml",
      "weight": "20%",
      "modifyList": [
        {
          "operationList": [
            {
              "merge": {
                "mergeSourceTag": "ttIsisLspConfig1",
                "mergeSourceTemplateFile": "AllRoutes.xml",
                "mergeTargetTag": "ttIsisRouterConfig"
              }
            }
          ]
        }
      ]
    },
    {
      "baseTemplateFile": "AllRouters.xml",
      "weight": "20%",
      "modifyList": [
        {
          "operationList": [
            {
              "mergeList": {
                "mergeSourceTag": "ttRouterLsaLink",
                "mergeSourceTemplateFile": "AllRoutes.xml",
                "mergeTargetTag": "ttOspfv2RouterConfig"
              }
            }
          ]
        }
      ]
    },
    {
      "baseTemplateFile": "BGP_Import_Routes.xml",
      "weight": "0",
      "importExpectedCount": 50,
      "importExpectedCountTolerancePercent": 0,
      "modifyList": [
        {
          "operationList": [
            {
              "propertyValue": {
                "className": "BgpImportRouteTableParams",
                "tagName": "ttBgpImportRouteTableParams",
                "propertyValueList": {
                  "FileName": "C:/ProgramData/Spirent/TestCenter 4.60/Methodology/Packages/BGPRRCON/bgp_fullroute.txt"
                }
              }
            }
          ]
        }
      ],
      "postExpandModify": [
        {
          "bllWizardExpand": {
            "targetTagList": [
              "ttEmulatedDevice"
            ],
            "srcObjectTagName": "ttBgpImportRouteTableParams",
            "createdRoutesTagName": "ttBgpRouteObjectImport",
            "commandName": "spirent.methodology.routing.BgpImportRoutesCommand"
          }
        }
      ]
    },
    {
      "baseTemplateFile": "AllRoutePrefixDist.xml",
      "weight": "10",
      "postExpandModify": [
        {
          "bllWizardExpand": {
            "targetTagList": [
              "ttEmulatedDevice"
            ],
            "srcObjectTagName": "ttBgpRouteGenParamsIpv4",
            "createdRoutesTagName": "ttBgpRouteObjectPrefix",
            "commandName": "spirent.methodology.routing.RoutePrefixDistributionCommand"
          }
        }
      ]
    }
  ]
}
-->
</stc:class>

<stc:class name="ExpandRouteMixCommand"
           displayName="Expand Route Mix Command"
           bllDirectInterface="true">
    <stc:attribute internalIsEnum="false" internalType="bool" name="none" type="core.Sequenceable" value="true"/>
    <stc:attribute internalIsEnum="false" internalType="string" name="none" type="framework.CommandDescription" value="Expands the route mix template(s) into RouteConfig objects. The route mix is defined from an StmTemplateMix object, populated with the mix information from the CreateRouteMixCommand."/>
    <stc:attribute internalIsEnum="false" internalType="string" name="none" type="framework.CommandCategory" value="Test Methodology//Routing"/>
    <stc:attribute type="core.RequireApplyToIL" value="false" internalType="bool" />
    <stc:attribute type="core.RequirePostApplyToIL" value="false" internalType="bool" />

    <stc:property category="input" name="TargetObjectList" displayName="Target Object List" type="handle" default="" minOccurs="0" maxOccurs="unbounded">
        <stc:attribute internalIsEnum="false" internalType="string" name="none" type="framework.PropertyDescription"
        value="List of handles of StmProtocolMix, StmTemplateConfig, EmulatedDevice, or RouterConfig objects in which RouteConfig objects will be expanded under."/>
    </stc:property>
    <stc:property category="input" name="TargetObjectTagList" displayName="Target Object Tag List" type="string" default="" minOccurs="0" maxOccurs="unbounded" >
      <stc:attribute internalIsEnum="false" internalType="string" name="none" type="framework.PropertyDescription" value="List of tag names of StmProtocolMix, StmTemplateConfig, EmulatedDevice, or RouterConfig objects in which RouteConfig objects will be expanded under." />
    </stc:property>

    <stc:property category="input" name="SrcObjectList" displayName="Source Object List" type="handle" default="" minOccurs="0" maxOccurs="unbounded">
        <stc:attribute internalIsEnum="false" internalType="string" name="none" type="framework.PropertyDescription"
        value="List of handles of StmTemplateMix objects that contain the XML for the RouteConfig objects being expanded."/>
    </stc:property>
    <stc:property category="input" name="SrcObjectTagList" displayName="Source Object Tag List" type="string" default="" minOccurs="0" maxOccurs="unbounded" >
      <stc:attribute internalIsEnum="false" internalType="string" name="none" type="framework.PropertyDescription" value="List of tag names of StmTemplateMix objects that contain the XML for the RouteConfig objects being expanded." />
    </stc:property>

    <stc:property category="input" name="RouteCount" displayName="Route Count"
                  type="u32" default="1000">
        <stc:attribute internalType="string" type="framework.PropertyDescription" value="Total number of routes for the route mix." />
    </stc:property>

<!-- CATEGORY: Routing -->

</stc:class>

<stc:class name="AllocateRouteMixCountCommand"
           displayName="Allocate Route Mix Route Count Command"
           bllDirectInterface="true">
    <stc:attribute internalIsEnum="false" internalType="bool" name="none" type="core.Sequenceable" value="true"/>
    <stc:attribute internalIsEnum="false" internalType="string" name="none" type="framework.CommandDescription" value="Takes the total route count of a given mix and distributes it across the components of the mix, according to the JSON information found in the StmTemplateMix object for the route mix. Multiple StmTemplateMix objects can be processed by this command, but each will be processed independently as though it were the only mix to be handled by this command.\n\nThis command is typically called internally by the CreateRouteMixCommand (when auto expand is enabled), or externally in the sequencer when changing of loads during iterative test loops is necessary."/>
    <stc:attribute internalIsEnum="false" internalType="string" name="none" type="framework.CommandCategory" value="Test Methodology//Routing"/>
    <stc:attribute type="core.RequireApplyToIL" value="false" internalType="bool" />
    <stc:attribute type="core.RequirePostApplyToIL" value="false" internalType="bool" />

    <stc:property category="input" name="RouteMixList" displayName="Route Mix" type="handle" default=""  minOccurs="0" maxOccurs="unbounded">
        <stc:attribute internalIsEnum="false" internalType="string" name="none" type="framework.PropertyDescription" value="List of handles of Route Mix Objects." />
        <stc:attribute internalIsEnum="false" internalType="string" name="none" type="core.ValidHandleTypes" value="StmTemplateMix" />
    </stc:property>
    <stc:property category="input" name="RouteMixTagList" displayName="Tag name for Route Mix" type="string" default=""  minOccurs="0" maxOccurs="unbounded">
        <stc:attribute internalIsEnum="false" internalType="string" name="none" type="framework.PropertyDescription" value="List of tag names associated with the Route Mix objects." />
    </stc:property>
    <stc:property category="input" name="RouteCount" displayName="Route Count"
                  type="u64" default="10">
        <stc:attribute internalType="string" type="framework.PropertyDescription" value="Total number of routes for the route mix." />
    </stc:property>
    <!-- This property should be removed -->
    <stc:property category="state" name="MixInfoJsonSchema" displayName="Route Mix Info JSON Schema" type="string" default=''>
        <stc:attribute internalIsEnum="false" internalType="string" name="none" type="framework.PropertyDescription"
         value="JSON schema that will be used to validate the MixInfo property's value."/>
        <stc:attribute type="framework.StringPropertyFormat" internalIsEnum="true" internalType="u8" value="JSON" />
    </stc:property>
<!-- CATEGORY: Routing -->
</stc:class>

<stc:class
    name="CreateConvergenceConfigCommand"
    displayName="Create Convergence Config Command"
    bllDirectInterface="true"
    isInternal="false">

    <stc:attribute internalIsEnum="false" internalType="bool" name="none" type="core.Sequenceable" value="true"/>
    <stc:attribute internalIsEnum="false" internalType="string" name="none" type="framework.CommandDescription" value="Create convergence configuration" />
    <stc:attribute internalIsEnum="false" internalType="string" name="none" type="framework.CommandCategory" value="Test Methodology"/>
    <stc:attribute type="core.RequireApplyToIL" value="false" internalType="bool" />
    <stc:attribute type="core.RequirePostApplyToIL" value="false" internalType="bool" />

    <stc:property category="input" name="TestType" displayName="Test Type"
                  type="string" default="">
      <stc:attribute internalIsEnum="false" internalType="string" name="none" type="framework.PropertyDescription" value="Convergence Test Type" />
    </stc:property>
    <stc:property category="input" name="IngressTagList" displayName="Ingress Tag List" type="string" default="" minOccurs="0" maxOccurs="unbounded">
      <stc:attribute internalIsEnum="false" internalType="string" name="none" type="framework.PropertyDescription" value="List of ingress tags." />
    </stc:property>
    <stc:property category="input" name="IngressClassNameList" displayName="Ingress Class Name List" type="string" default="" minOccurs="0" maxOccurs="unbounded">
      <stc:attribute internalIsEnum="false" internalType="string" name="none" type="framework.PropertyDescription" value="Ingres class name of the object being added." />
    </stc:property>
    <stc:property category="input" name="PrimaryEgressTagList" displayName="Primary Egress Tag List" type="string" default="" minOccurs="0" maxOccurs="unbounded">
      <stc:attribute internalIsEnum="false" internalType="string" name="none" type="framework.PropertyDescription" value="List of primary egress tags." />
    </stc:property>
    <stc:property category="input" name="SecondaryEgressTagList" displayName="Secondary Egress Tag List" type="string" default="" minOccurs="0" maxOccurs="unbounded">
      <stc:attribute internalIsEnum="false" internalType="string" name="none" type="framework.PropertyDescription" value="List of secondary egress tags." />
    </stc:property>
    <stc:property category="input" name="EgressClassNameList" displayName="Egress Class Name" type="string" default=""  minOccurs="0" maxOccurs="unbounded">
      <stc:attribute internalIsEnum="false" internalType="string" name="none" type="framework.PropertyDescription" value="Egres class name of the object being added." />
    </stc:property>
    <stc:property category="input" name="StreamBlockTagList" displayName="Stream Block Tag List" type="string" default="" minOccurs="0" maxOccurs="unbounded">
      <stc:attribute internalIsEnum="false" internalType="string" name="none" type="framework.PropertyDescription" value="List of streamblock tags." />
    </stc:property>
    <stc:property category="input" name="TagName" displayName="Tag Name For Convergence Configuration"
                  type="string" default="">
      <stc:attribute internalIsEnum="false" internalType="string" name="none" type="framework.PropertyDescription" value="Tag Name For Convergence Configuration" />
    </stc:property>
    <stc:property category="input" name="StreamConvergenceThreshold" type="u32" default="10" displayName="Stream Convergence Threshold (us)">
      <stc:attribute internalIsEnum="false" internalType="string" name="none" type="framework.PropertyDescription" value="Stream Convergence Threshold (us)" />
    </stc:property>
<!-- CATEGORY: Routing -->
</stc:class>

</stc:meta>
