{
  "InitRealTimeResultsCommand":
    {
        "title": "Schema for the InitRealTimeResultsCommand InputJson property.",
        "type": "array",
        "minItems": 0,
        "items":
        {
            "type": "object",
            "properties":
            {
                "enable":
                {
                    "type": "boolean"
                },
                "description":
                {
                    "description": "Optional description field to describe this RT result object.",
                    "type": "string"
                },
                "result_id":
                {
                    "type": "string"
                },
                "type":
                {
                    "description": "The type of display format. Default is NONE.",
                    "enum": ["NONE", "table", "chart", "grafana"]
                },
                "definition":
                {
                    "description": "The display definition, e.g., highcharts JSON if type is chart.",
                    "type": "object"
                },
                "source_type":
                {
                    "enum": ["DATA", "SUMMARY_DB", "INFLUX_DB", "NFVI_INFLUX_DB", "RESULTS_SUBSCRIBE", "DRV", "NFV_INTERFACE_ALERTS"],
                    "description": "The type of source used for this result object."
                },
                "destination_db":
                {
                    "enum": ["NONE", "SQL_DB", "INFLUX_DB", "SQL_AND_INFLUX_DB"],
                    "description": "Specify the destination DB of the results when source_type is RESULTS_SUBSCRIBE. The default is SQL_DB."
                },
                "run_sql":
                {
                    "type": "array",
                    "minItems": 0,
                    "items":
                    {
                        "description": "This node defines the entire JSON that is sent to RunSqlCommand.",
                        "type": "object"
                    }
                },
                "subscribe":
                {
                    "type": "array",
                    "minItems": 0,
                    "items":
                    {
                        "description": "This node defines how to subscribe to STC results and optionally how to handle the results.",
                        "type": "object",
                        "properties":
                        {
                            "legend":
                            {
                                "description": "The legend to use for the data for chart plotting purposes. Specify a list corresponding to the view_attribute_list or a single string to be used by all attributes.",
                                "type" : ["string", "array"]
                            },
                            "prefix_port_location":
                            {
                                "description": "Prefix the port location to the result attribute name or legend.",
                                "enum": ["NONE", "CHASSIS_IP"]
                            },
                            "use_device_name":
                            {
                                "description": "Enable to use the device name to the result attribute name.",
                                "type": "boolean"
                            },
                            "config_type":
                            {
                                "description": "The value for ResultsSubscribeCommand.ConfigType",
                                "type": "string"
                            },
                            "result_type":
                            {
                                "description": "The value for ResultsSubscribeCommand.ResultType",
                                "type": "string"
                            },
                            "view_attribute_list":
                            {
                                "description": "The values for ResultsSubscribeCommand.ViewAttributeList",
                                "type": "array",
                                "items":
                                {
                                    "type": "string"
                                }
                            },
                            "result_parent_tags":
                            {
                                "description": "List of tags to make up a list of handles for ResultsSubscribeCommand.ResultParent collection.",
                                "type": "array",
                                "items":
                                {
                                    "type": "string"
                                }
                            },
                            "interval":
                            {
                                "description": "(optional) The interval to setup the subscription in seconds.",
                                "type": "string"
                            },
                            "db_table":
                            {
                                "description": "(optional) A database table to store the results into a Summary DB.",
                                "type": "string"
                            },
                            "result_data_set_handle":
                            {
                                "description": "STATE: the handle to the ResultDataSet generated by the subscription.",
                                "type": "integer"
                            },
                            "operation":
                            {
                                "description": "An operation that is performed on the sampled data prior to being used/stored.",
                                "enum": ["SUM"]
                            }
                        },
                        "required": [
                            "config_type", "result_type", "view_attribute_list", "result_parent_tags"
                        ]
                    }
                },
                "query":
                {
                    "type": "object",
                    "properties":
                    {
                        "table":
                        {
                            "type": "string"
                        },
                        "timestamp_column_name":
                        {
                            "type": "string"
                        },
                        "enable_normalize_timestamp":
                        {
                            "description": "When enabled, will normalize the timestamp values based on the first timestamp received (the first timestamp will be set to 0).",
                            "type": "boolean"
                        },
                        "data_column_names":
                        {
                            "type": "array",
                            "items":
                            {
                                "type": "string"
                            }
                        }
                    },
                    "required": [
                        "table", "timestamp_column_name", "data_column_names"
                    ]
                },
                "drv":
                {
                    "type": "object",
                    "properties":
                    {
                        "name":
                        {
                            "description": "The name of the DRV.",
                            "type": "string"
                        },
                        "filename":
                        {
                            "description": "The DRV XML filename.",
                            "type": "string"
                        },
                        "columns_to_tag_in_influx":
                        {
                            "description": "List of DRV column names that will become tag keys in the InfluxDB. Only applicable when destination_db is *INFLUX_DB.",
                            "type": "array",
                            "minItems": 0,
                            "items":
                            {
                                "description": "DRV column name that will become a tag key in the InfluxDB.",
                                "type": "string"
                            }
                        },
                        "column_type_list":
                        {
                            "description": "Override the default DRV column type by specifying an optional list here.",
                            "type": "array",
                            "minItems": 0,
                            "items":
                            {
                                "description": "Force a DRV column to use a specific type instead of what is returned in ColumnUnits.",
                                "type": "object",
                                "properties":
                                {
                                    "description":
                                    {
                                        "description": "Optional description.",
                                        "type": "string"
                                    },
                                    "property_id":
                                    {
                                        "description": "ColumnPropertyId in ColumnDisplayProperties of the DRV column. For example, StreamBlock.TxFrameRate.",
                                        "type": "string"
                                    },
                                    "type":
                                    {
                                        "description": "Specify the type the column should be cast to when getting the data.",
                                        "enum": ["INTEGER", "FLOAT", "TEXT"]
                                    }
                                },
                                "required": [
                                    "property_id", "type"
                                ]
                            }
                        }
                    },
                    "required": [
                        "name", "filename"
                    ]
                }
            },
            "oneOf": [
                {
                    "properties":
                    {
                       "source_type":
                       {
                           "enum": ["DATA", "SUMMARY_DB", "RESULTS_SUBSCRIBE"],
                           "description": "The type of source used for this result object."
                       }
                    },
                    "oneOf": [
                       {
                           "required": [
                                "result_id", "type", "definition", "source_type", "query"
                           ]
                       },
                       {
                           "required": [
                                "result_id", "type", "definition", "source_type", "subscribe"
                           ]
                       }
                    ]
                },
                {
                    "properties":
                    {
                       "source_type":
                       {
                           "enum": ["INFLUX_DB", "NFVI_INFLUX_DB"],
                           "description": "The type of source used for this result object."
                       }
                    },
                    "required": [
                        "result_id", "type", "definition", "source_type"
                    ]
                },
                {
                    "properties":
                    {
                       "source_type":
                       {
                           "enum": ["DRV"],
                           "description": "The type of source used for this result object."
                       }
                    },
                    "required": [
                        "result_id", "type", "definition", "source_type", "drv"
                    ]
                },
                {
                    "properties":
                    {
                       "source_type":
                       {
                           "enum": ["NFV_INTERFACE_ALERTS"],
                           "description": "Show interface alerts in NFVi topology diagram."
                       }
                    },
                    "required": [
                        "result_id", "source_type"
                    ]
                }
            ]
        }
    },
  "ResultDisplayJson_StmRtResult":
    {
        "title": "Schema for the real time results' display definitions within the ResultDisplayJson property of the StmRtResult object.",
        "type": "array",
        "minItems": 0,
        "items":
        {
            "type": "object",
            "properties":
            {
                "result_id":
                {
                    "type": "string"
                },
                "type":
                {
                    "type": "string"
                },
                "definition":
                {
                    "type": "object"
                }
            },
            "required": [
                "type", "definition"
            ]
        }
    },
  "ResultDisplayJson_Table_StmRtResult":
    {
        "title": "Schema for the real time results' table information within the ResultInfoJson property of the StmRtResult object.",
        "type": "object",
        "properties":
        {
            "title":
            {
                "type": "string"
            },
            "headers":
            {
                "type": "array",
                "minItems": 0,
                "items":
                {
                    "type": "string"
                }
            },
            "rows":
            {
                "$ref":"#/ResultDataJson_Table_StmRtResult"
            },
            "max_rows":
            {
                "description": "Limit the number of displayed rows. New rows will overwrite existing ones. Set to 0 for no limit.",
                "type": "number",
                "minimum": 0
            }
        },
        "required": [
            "headers", "rows"
        ]
    },
    "ResultDisplayJson_Grafana_StmRtResult":
    {
        "title": "Schema for the real time results' grafana information within the ResultDisplayJson property of the StmRtResult object.",
        "type": "object",
        "properties":
        {
            "input_file":
            {
                "type": "string"
            },
            "linked_input_files":
            {
                "type": "array",
                "minItems": 0,
                "items": {
                    "type": "string"
                }
            },
            "name":
            {
                "type": "string"
            },
            "title":
            {
                "type": "string"
            },
            "merge_dash_parameters":
            {
                "type": "boolean"
            },
            "import_type":
            {
                "enum": ["ALL", "NONE", "INPUT_FILE", "LINKED_INPUT_FILES"],
                "description": "Specify the type of dashboard files to import"
            },
            "parameters":
            {
                "description": "checked by metadata schema",
                "type": "array",
                "items": {
                    "type": "object"
                }
            },
            "frames":
            {
                "type": "array",
                "items": {
                    "type": "object",
                    "oneOf": [
                        {
                            "properties": {
                                "frame": {
                                    "$ref": "#/ResultDisplayJson_Grafana_Frame_StmRtResult"
                                }
                            }
                        }
                    ]
                }
            }
        },
        "additionalProperties": true,
        "oneOf": [
            {
                "required": [
                    "input_file"
                ]
            }
        ]
    },
    "ResultDisplayJson_Grafana_Frame_StmRtResult":
    {
        "title": "Schema for the real time results' grafana frame information within the ResultDisplayJson property of the StmRtResult object.",
        "type": "object",
        "properties":
        {
            "title":
            {
                "type": "string"
            },
            "panel_ids":
            {
                "type": "array",
                "items": {
                    "type": "string"
                }
            }
        },
        "required": [
            "panel_ids"
        ]
    },
    "ResultInfoJson_StmRtResult":
    {
        "title": "Schema for the real time results' information within the ResultInfoJson property of the StmRtResult object.",
        "type": "array",
        "minItems": 0,
        "items":
        {
            "type": "object",
            "properties":
            {
                "result_id":
                {
                    "type": "string"
                },
                "type":
                {
                    "type": "string"
                },
                "last_timestamp":
                {
                    "type": "string"
                },
                "query":
                {
                    "type": "object",
                    "properties":
                    {
                        "table":
                        {
                            "type": "string"
                        },
                        "timestamp_column_name":
                        {
                            "type": "string"
                        },
                        "data_column_names":
                        {
                            "type": "array",
                            "items":
                            {
                                "type": "string"
                            }
                        }
                    }
                }
            },
            "required": [
                "type", "result_id", "data"
            ]
        }
    },
    "ResultDataJson_StmRtResult":
    {
        "title": "Schema for the real time results' polled data within the ResultDataJson property of the StmRtResult object.",
        "type": "array",
        "minItems": 0,
        "items":
        {
            "type": "object",
            "properties":
            {
                "result_id":
                {
                    "type": "string"
                },
                "type":
                {
                    "type": "string"
                },
                "data":
                {
                    "type": "array",
                    "minItems": 0,
                    "oneOf": [
                        {
                            "items":
                            {
                                "type": "object"
                            }
                        },
                        {
                            "items":
                            {
                                "type": "array"
                            }
                        }
                    ]
                }
            },
            "required": [
                "type", "result_id", "data"
            ]
        }
    },
    "ResultDataJson_Table_StmRtResult":
    {
        "title": "Schema for the real time results' table data generated by the polling command within the ResultDataJson property of the StmRtResult object.",
        "type": "array",
        "minItems": 0,
        "items":
        {
            "type": "array",
            "minItems": 0,
            "items": {}
        }
    }
}

