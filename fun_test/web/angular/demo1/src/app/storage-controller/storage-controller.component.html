<div>
  <u (click)="showingApiViewer = !showingApiViewer" class="anchor-button api-viewer-link">API viewer</u>
</div>

<div class="container">
  <div class="row">
    <div class="col">
      <div style="padding-bottom: 20px" *ngIf="dataSource.data.length === 0">
        <button mat-button (click)="addingNewController = !addingNewController"><u class="anchor-button">Add a new
          controller</u></button>
      </div>
      <div *ngIf="dataSource.data.length === 0">
        <mat-accordion>
          <mat-expansion-panel [expanded]="addingNewController" (opened)="setStep(0)" hideToggle>
            <div class="mat-form-field-div">
              <mat-form-field>
                <input matInput placeholder="ip" [(ngModel)]="newControllerConfig.ip" [value]="qa-ubuntu-02">
              </mat-form-field>
              <mat-form-field>
                <input type="number" matInput placeholder="port" [(ngModel)]="newControllerConfig.port" [value]="50220">
              </mat-form-field>
            </div>
            <br>

            <mat-action-row>
              <button mat-button color="primary" (click)="submit()">Submit</button>
            </mat-action-row>
          </mat-expansion-panel>
        </mat-accordion>
      </div>
      <br>

      <mat-card *ngIf="dataSource.data.length > 0">
        <p>Available Controller</p>
        <mat-radio-group [(ngModel)]="selectedElement" [required]="true">
          <table mat-table multiTemplateDataRows [dataSource]="dataSource">

            <ng-container *ngIf="radioSelection" matColumnDef="active">
              <th mat-header-cell *matHeaderCellDef>
                Active
              </th>

              <td mat-cell *matCellDef="let row">
                <mat-radio-button [value]="row" (click)="selection.select(row); activeControllerSelected(row);"
                                  [checked]=row.active>
                </mat-radio-button>
              </td>
            </ng-container>

            <ng-container *ngIf="radioSelection" matColumnDef="health">
              <th mat-header-cell *matHeaderCellDef>
                Health
              </th>

              <td mat-cell *matCellDef="let row">
                <div [ngClass]='{"heart": row.health}'>&#x2665;</div>
              </td>
            </ng-container>

            <ng-container matColumnDef="ip">
              <th mat-header-cell *matHeaderCellDef> IP</th>
              <td mat-cell *matCellDef="let element"> {{ element.ip }} </td>
            </ng-container>

            <ng-container matColumnDef="port">
              <th mat-header-cell *matHeaderCellDef> Port</th>
              <td mat-cell *matCellDef="let element"> {{ element.port }} </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>

            <ng-container *ngIf="!radioSelection">
              <tr mat-row *matRowDef="let row; columns: displayedColumns;"
                  class="example-element-row"
                  [class.example-expanded-row]="expandedElement === row"
                  (click)="selection.toggle(row); expandedElement = row;">
              </tr>
            </ng-container>
            <ng-container *ngIf="radioSelection">
              <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="selection.select(row);">
              </tr>
            </ng-container>

          </table>
        </mat-radio-group>
      </mat-card>
    </div>
    <div *ngIf="showingApiViewer" class="col"><app-api-viewer></app-api-viewer></div>
  </div>


</div>
