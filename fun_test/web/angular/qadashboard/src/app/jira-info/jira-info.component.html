<div class="card">
  <div class="card card-primary">
    <div class="card-header min-padding">
      <ng-container *ngIf="summaryInHeader; else NoSummaryInHeader">
        <b>
          <span class="no-padding text-color-red">Bugs
            <sup><span class="text-color-red">{{ jiraInfo.length }}</span></sup>
          </span>
        </b>&nbsp;
        <span><span style="color: red">Active </span>- {{ activeBugs }}
                    <span style="color: green">Resolved </span> - {{ resolvedBugs }}
        </span>
      </ng-container>
      <ng-template #NoSummaryInHeader>Bugs</ng-template>


      <button *ngIf="close.observers.length > 0" class="btn-sm btn-primary close-button" (click)="closePanel()">close <b
        style="color: white;">X</b></button>
    </div>
    <div class="card-body min-padding">
      <div class="min-padding">
        <a *ngIf="allowAdd" [routerLink]="" (click)="editingJira=true">Add New </a>
        <i *ngIf="editingJira" style="font-size: 95%;"><input type="text" class="jira-text" [(ngModel)]="jiraId">
          <span><i class="fa fa-check fa-fw tick-color" (click)="submit()"></i></span>
          <span><i class="fa fa-times fa-fw close-color" (click)="editingJira = false"></i></span></i>
      </div>
      <fun-spinner [status]="status"></fun-spinner>
      <div style="margin-top: 2px" *ngIf="jiraInfo.length>0">
        <table class="table table-responsive">
          <tr>
            <th *ngIf="allowDelete">
            </th>
            <th>
              JIRA Id
            </th>
            <th>
              Summary
            </th>
            <th>
              Status
            </th>
            <ng-container *ngIf="showDetails">
              <th>
                Severity <i class="fa fa-sort" (click)="setSortColumn('Severity')"></i>
              </th>
              <th>
                Priority <i class="fa fa-sort" (click)="setSortColumn('Priority')"></i>
              </th>
              <th>
                Created by
              </th>
              <th>
                Open since <i class="fa fa-sort" (click)="setSortColumn('Open since')"></i>
              </th>
            </ng-container>

            <th *ngIf="allowContext" style="width: 30%">
              Context
            </th>
          </tr>
          <tr *ngFor="let info of jiraInfo">
            <td class="right-padding" *ngIf="allowDelete">
              <button class="btn btn-sm no-padding" (click)="removeId(info['id'])"><i class="fa fa-trash-o"
                                                                                      style="font-size:16px; color: red"></i>
              </button>
            </td>
            <td>
              <a href="http://jira.fungible.local/browse/{{ info['id'] }}" target="_blank">{{ info['id'] }}</a>
            </td>
            <td>
              {{ info["summary"] }}
            </td>
            <td>
              {{ info["status"] }}
            </td>
            <ng-container *ngIf="showDetails">
              <td>
                {{ info["severity"] }}
              </td>
              <td>
                {{ info["priority"] }}
              </td>
              <td>
                {{ info["creator"] }}
              </td>
              <td>
                {{ info["openSince"] }}
              </td>
            </ng-container>

            <td *ngIf="allowContext">
              <span [innerHTML]="data[info['id']]?.context"></span>
            </td>
          </tr>
        </table>
      </div>
    </div>
  </div>
</div>
