<!--shows the charts for a particular workspace-->
<div *ngIf="showWorkspace" class="card card-primary">
  <div class="card-header">
    <h5 style="text-align: center; margin: 0"><b><a [routerLink]="" class="fa fa-angle-double-left"
                                                    style="font-size:
      large;
        float: left" (click)="goBack()">&nbsp;Back</a></b>
      <span>{{ workspace.workspace_name }}</span></h5>
      <a *ngIf="!showGrids" [routerLink]="" (click)="showGrids = true">+ Show charts</a>
  <a *ngIf="showGrids" [routerLink]="" (click)="showGrids = false">- Hide charts</a>
  </div>
  <div class="card-body flex-container">
    <div style="flex: 0 0 50%; padding: 10px">
      <table style="width: 100%">
        <tr style="vertical-align: top">
          <th style="width: 30%">
            Chart name
          </th>
          <th style="width: 10%">
            Track
          </th>
          <th style="width: 10%">
            Subscribe to alerts
          </th>
          <th style="width: 10%">
            Yesterday's score
          </th>
          <th style="width: 10%">
            Today's score
          </th>
          <th style="width: 30%">
            Lineage
          </th>
        </tr>
        <tr *ngFor="let metric of workspace.interested_metrics">
          <td>
            <a [ngClass]="{highlight:metric.selected}" [routerLink]="" (click)="openChartTable(metric)">{{
              metric['chart_name'] }}</a>
          </td>
          <td>
            <app-toggle-button [checked]="metric['track']" [disabled]="true"
            ></app-toggle-button>
          </td>
          <td>
            <app-toggle-button [checked]="metric['subscribe']" [disabled]="true"
            ></app-toggle-button>
          </td>
          <td>
            {{ metric["penultimate_good_score"] }}
          </td>
          <td>
            {{ metric["last_good_score"] }}
          </td>
          <td>
            {{ metric["lineage"] }}
          </td>
        </tr>
      </table>
    </div>

    <fun-spinner [status]="status"></fun-spinner>
    <div *ngIf="showChartTable" style="flex: 0 0 50%; vertical-align: top; padding: 10px">
      <b>Chart name: </b>{{ currentChart.chart_name }} <a [routerLink]="" (click)="closeChartTable()">Close</a>
      <table style="width: 80%">
        <tr>
          <th style="width: 20%">
            Name
          </th>
          <th style="width: 30%">
            Yesterday
          </th>
          <th style="width: 30%">
            Today
          </th>
          <th style="width: 10%">
            Unit
          </th>
        </tr>
        <tr *ngFor="let oneData of data">
          <td>
            {{ oneData.name }}
          </td>
          <td>
            {{ oneData.yesterday }}
          </td>
          <td>
            {{ oneData.today }}
          </td>
          <td>
            {{ oneData.unit }}
          </td>
        </tr>
      </table>
    </div>
  </div>
  <div *ngIf="showGrids" class="card-body flex-container">
    <ng-container *ngFor="let row of workspace.interested_metrics">
      <div style="flex: 0 0 50%; padding-bottom: 10px;">
        <table>
          <tr>
            <td>
              <b>Lineage:</b>
            </td>
            <td>
              {{ row['lineage'] }}
            </td>
          </tr>
        </table>
        <fun-metric-chart [id]="row['metric_id']" [minimal]="'true'" [buildInfo]="buildInfo"></fun-metric-chart>
      </div>
    </ng-container>
    <div class="closed-section"></div>
  </div>
</div>
